<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width">
        <script>
            (function() {
                'use strict';

                var isProduction = (/^(www\.)?cinema6\.com$/).test(window.location.hostname),
                    base = isProduction ? '//portal.cinema6.com' : '//staging.cinema6.com',
                    params = window.location.search.replace(/^\?/, '')
                        .split('&')
                        .reduce(function(params, segment) {
                            var pair = segment.split('=')
                                .map(decodeURIComponent),
                                key = pair[0], value = pair[1];

                            if (key) {
                                params[key] = value;
                            }

                            return params;
                        }, {}),
                    c6 = window.c6 = {
                        isProduction: isProduction,
                        embeds: [],
                        gaAcctIdPlayer: 'UA-44457821-2',
                        gaAcctIdEmbed: 'UA-44457821-3'
                    };

                function writeScript(src) {
                    document.write('<script src="' + src +'"><\/script>');
                }

                /* Create GA Tracker */
                (function() {
                    /* jshint sub:true, asi:true, expr:true, camelcase:false, indent:false */
                    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','__c6_ga__');
                    /* jshint sub:false, asi:false, expr:false, indent:4 */

                    window.__c6_ga__('create', c6.gaAcctIdPlayer, {
                        'name'       : 'c6',
                        'cookieName' : '_c6ga'
                    });
                    /* jshint camelcase:true */
                }());

                window.module = {
                    exports: {}
                };

                window.writeScript = writeScript;

                writeScript(base + '/api/public/content/experience/' + params.id + '.js?context=standalone');
            }());
        </script>
        <script src="//lib.cinema6.com/c6embed/v1/app.min.js"></script>
        <script>
            if (window.c6.isProduction) {
                writeScript('//lib.cinema6.com/c6embed/v1/app.min.js');
            } else {
                writeScript('http://s3.amazonaws.com/c6.dev/ext/c6embed/v1/app.js');
            }
        </script>
    </head>
    <body>
        <script>
            (function() {
                'use strict';
                var experience = window.module.exports;

                if (!experience.data) { //e.g. 404
                    window.location.href = '/404.html';
                }

                experience.data.mode = 'full';

                document.write('<title>' + experience.data.title + '<' + '/title>');

                c6.loadExperience(c6.embeds[c6.embeds.push({
                    load: true,
                    standalone: true,
                    experience: window.module.exports,
                    embed: document.body,
                    splashDelegate: {},
                    config: {
                        exp: experience.id,
                        title: experience.data.title
                    }
                }) - 1]);
            }());
        </script>
    </body>
</html>
